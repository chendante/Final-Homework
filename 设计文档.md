

# 设计文档
## 一、数据库设计


### 1.世界杯部分

#### 1.1 ER图

![image](434541B939BC4FCF99792CE58FBA5F7E)


#### 1.2 各表内容介绍

  所有表的引擎均设置为*InnoDB*，字符集为*utf8 -- UTF-8 Unicode*，排序规则为*utf8_general_ci*。外键删除更新均设为*CASCADE*（级联操作）。
  

- db_players

属性名 | 类型 | 属性含义 | 备注信息
---|---|---|---
player_id| char(10) | 球员id | 主键 
team_id	|char(10)|	国家队id|外键，参照team表
player_name|char(50)|	球员中文名|
position_cn|	char(50)|	场上位置|
club_cn|	char(50)|	俱乐部名|
age	|char(20)|	年龄|
birth_date|	char(20)|出生|
weight|	char(10)|	体重|
height|	char(10)|	身高|	
jersey_num|	char(5)|	球衣号码|
pic	|varchar(255)|	球员照片url|	
team_logo| varchar(255)|	国家队Logo url|	
DeleteStatus|bit|删除标志位|默认1

两个照片url用于通过网络直接调取所需照片。本表主要存储球员的基本信息。

- db_top_scorer


属性名 | 类型 | 属性含义 | 备注信息
---|---|---|---
row_id|	int|	记录球员排名,用于排序|	主键
player_id|	char(10)|	球员ID	|外键，参照players表
goals| 	char(5)|	进球数	
penalty|	char(5)|	点球数	
owngoal|	char(5)|	乌龙数	
assists|	char(5)|	助攻数	
minutes|	char(5)|	出场时间	
sl_team_id|	char(10)|	球队ID	
DeleteStatus|bit|删除标志位|默认1

本表主要存储在射手榜排名前120的球员在世界杯上的整体表现和排名。

- db_player_data

属性名 | 类型 | 属性含义 | 备注信息
---|---|---|---
player_id|	char(10)|	球员id|	主键
home_name_cn|	char(50)|	主队名称|	主键 team表外键
away_name_cn|	char(50)|	客队名称|	主键 team表外键
home_score|	char(5)|	主队得分|	
away_score|	char(5)|	客队得分|	
mins_played|	char(5)|	出场时间|
goals|	char(5)|	进球数|	
goal_assist|	char(5)|	助攻|	
total_scoring_att|	char(5)|	射门数|	
total_pass|	char(5)|	传球|	
accurate_pass|	char(5)|	传准|	
total_att_assist|	char(5)|	传威胁球|
fouls|	char(5)|	犯规数|	
was_fouled|	char(5)|	被侵犯|	
won_tackle|	char(5)|	抢断|	
total_clearance|	char(5)|	解围|	
saves|	char(5)|	扑救|	
red	|char(5)|	红牌|	
yellow|	char(5)|	黄牌|	
status_cn|	char(5)|	比赛状态|	
DeleteStatus|bit|删除标志位|默认1

本表存储球员在世界杯各场比赛中的表现。

- db_teams

属性名 | 类型 | 属性含义 | 备注信息
---|---|---|---
sl_team_id|char(10)|	球队ID|	主键且唯一
team_name|	char(50)|	球队名称| 主键且唯一
goals|	char(5)|	进球|
total_scoring_att|	char(5)|	射门|
total_pass|	char(10)|	传球|
total_tackle|	char(5)|	抢断|
possession_percentage|	char(10)|	控球率	|
pass_percentage|	char(10)|	传球成功率|
yellow|	char(5)|	黄牌|	
red	|char(5)|	红牌|
fk_foul_won	|char(5)|	任意球	
won_corners|	char(5)|	角球
total_cross|	char(5)|	传中
total_offside|	char(5)|	越位	
total_throws|	char(5)|	界外球|
post_door|	char(5)|	击中门框|
DeleteStatus|bit|删除标志位|默认1

本表存储参加世界杯各球队的有关比赛的统计信息。

- db_team_info

属性名 | 类型 | 属性含义 | 备注信息
---|---|---|---
tid| char(10)|	球队id|	主键 team表外键
team_name|	char(50)|	球队名称| team表外键	
coach|	char(50)|	教练名|
family|	char(50)|	球队合照|	
king|	char(100)|	重要球星|
honor|	char(100)|	最好成绩|
DeleteStatus|bit|删除标志位|默认1

本表存储了参加世界杯的各球队的一些基本信息。

- db_score_board

属性名 | 类型 | 属性含义 | 备注信息
---|---|---|---
sl_id|	char(10)|	球队ID|主键 team表外键
team_cn|	char(50)|	球队名称|	team表外键
team_order|	char(5)|	球队排名	
count|	char(5)|	场次
win|	char(5)|	胜	
lose|	char(5)| 负	
draw|	char(5)|	平	
goal|	char(5)|	进球	
losegoal	|char(5)	|失球	
truegoal	|char(5)	|净胜球	
score|	char(5)|	积分
groups|	char(5)|	小组
logo|	varchar(255)|	国家图片
DeleteStatus|bit|删除标志位|默认1

本表存储了各球队在世界杯小组赛期间的表现。


- db_games

属性名 | 类型 | 属性含义 | 备注信息
---|---|---|---
game_id|char(11)|比赛ID|主键
date|char(20)|比赛日期
time|char(10)|比赛开始时间
team1|char(50)|比赛主队名称|team表外键
team1_id|char(10)|比赛主队ID|team表外键
team2|char(50)|比赛客队名称|team表外键
team2_id|char(10)|比赛客队ID|team表外键
score1|char(5)|主队得分
score2|char(5)|客队得分
groups|char(5)|比赛所在小组
matchcity|char(50)|比赛城市
round|char(5)|比赛轮次
DeleteStatus|bit|删除标志位|默认1

本表存储了世界杯期间各场比赛的基本信息。

### 2.团队信息部分

#### 2.1 ER图

![image](AA98559C13EB4DE7818E62E0EF367B2C)

#### 2.2 各表内容介绍

- user

由yii自动生成，包括用户注册时填写的大部分信息。

- db_news

属性名 | 类型 | 属性含义 | 备注信息
---|---|---|---
NID|int(11)|新闻ID|主键
Title|varchar(255)|新闻标题
Keywords|varchar(255)|新闻关键词
AuthorID|int(11)|作者ID|user表外键
PublishTime|datatime|发布时间
Content|text|新闻内容
Hits|int(11)|点击量
UpdateTime|datetime|新闻更新时间
DeleteStatus|bit|删除标志位|默认1

本表存储关于新闻的全部主体信息。

- db_news_comment

属性名 | 类型 | 属性含义 | 备注信息
---|---|---|---
CID|int(11)|评论ID|主键
NID|int(11)|新闻ID|news表外键
UserID|int(11)|评论者ID|user表外键
CommentContent|varchar(255)|评论内容
CommentTime|datetime|评论时间
Type|bit|评论类型|
CommentName|varchar(255)|评论名称
DeleteStatus|bit|删除标志位|默认1

本表存储关于新闻评论的信息。评论主要有两种类型，对于新闻本身的评论以及对于其下评论的评论，如果是后者则需要填写评论名称。

- db_homework_personal

属性名 | 类型 | 属性含义 | 备注信息
---|---|---|---
HID|int(11)|作业ID|主键
HomeworkName|varchar(255)|作业名
Path|varchar(255)|存储路径
MemberID|int(11)|成员ID|group_member表外键
Mark|varchar(255)|作业备注

本表用于存储互联网数据库课程成员个人作业信息。

- db_group_member

属性名 | 类型 | 属性含义 | 备注信息
---|---|---|---
StudentID|int(11)|学号|主键
StudentName|varchar(24)|成员姓名
StudentMajor|varchar(11)|成员专业
PersonalProfile|text|个人简介
ResponsiblePart|text|负责部分
Sex|char(2)|性别
Birthday|date|生日
Polity|varchar(64)|政治面貌
Email|varchar(64)|邮箱
Tel|varchar(11)|电话
DeleteStatus|bit|删除标志位|默认1

本表用于存储开发成员的信息。

- db_homework_group

属性名 | 类型 | 属性含义 | 备注信息
---|---|---|---
HID|int(11)|作业ID|主键
HomeworkName|varchar(255)|作业名称|
Path|varchar(255)|作业存储路径
Mark|varchar(255)|作业备注

本表用于存储互联网数据库课程的团队作业信息。

## 二、模块图
